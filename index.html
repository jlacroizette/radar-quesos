<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Radar detector de quesos</title>
  <style>
    body {
      background: radial-gradient(circle at center, #001900 0%, #000 90%);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      overflow: hidden;
      font-family: Arial, sans-serif;
      color: white;
    }

    .radar {
      position: relative;
      width: 80vmin;
      height: 80vmin;
      border-radius: 50%;
      background: radial-gradient(circle at center, #003300 0%, #001900 70%);
      border: 3px solid #0f0;
      overflow: hidden;
      box-shadow: 0 0 20px #0f03;
      touch-action: manipulation;
    }

    .beam {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: conic-gradient(from 0deg, rgba(0,255,0,0.35) 0deg, rgba(0,255,0,0.05) 40deg, transparent 60deg);
      animation: rotate 4s linear infinite;
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .cheese {
      position: absolute;
      transform: translate(-50%, -50%);
      font-size: 48px;
      user-select: none;
      transition: transform 0.2s;
      cursor: pointer;
    }

    .pulse {
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.1); }
    }
  </style>
</head>
<body>
  <div class="radar" id="radar">
    <div class="beam"></div>
  </div>

  <script>
    const radar = document.getElementById('radar');
    const cheeses = [];

    function addCheese(x, y) {
      const cheese = document.createElement('div');
      cheese.className = 'cheese pulse';
      cheese.textContent = '🧀';
      cheese.style.left = x + 'px';
      cheese.style.top = y + 'px';
      radar.appendChild(cheese);

      const obj = {
        el: cheese,
        x, y,
        dx: (Math.random() - 0.5) * 0.6,
        dy: (Math.random() - 0.5) * 0.6,
      };
      cheeses.push(obj);

      // Al hacer clic sobre el queso: eliminarlo
      cheese.addEventListener('click', (ev) => {
        ev.stopPropagation(); // evita que el radar añada otro
        radar.removeChild(cheese);
        const index = cheeses.indexOf(obj);
        if (index !== -1) cheeses.splice(index, 1);
      });
    }

    // Añade 3-4 quesos automáticamente
    function spawnInitialCheeses() {
      const rect = radar.getBoundingClientRect();
      const cx = rect.width / 2;
      const cy = rect.height / 2;
      const radius = rect.width / 2 * 0.8;

      const count = 3 + Math.floor(Math.random() * 2);
      for (let i = 0; i < count; i++) {
        const angle = Math.random() * Math.PI * 2;
        const dist = Math.random() * radius * 0.9;
        const x = cx + Math.cos(angle) * dist;
        const y = cy + Math.sin(angle) * dist;
        addCheese(x, y);
      }
    }

    // Movimiento suave de los quesos
    function animateCheeses() {
      const rect = radar.getBoundingClientRect();
      const cx = rect.width / 2;
      const cy = rect.height / 2;
      const radius = rect.width / 2 - 30;

      cheeses.forEach(c => {
        c.x += c.dx;
        c.y += c.dy;
        const dx = c.x - cx;
        const dy = c.y - cy;
        if (dx * dx + dy * dy > radius * radius) {
          // rebote hacia dentro
          c.dx *= -1;
          c.dy *= -1;
        }
        c.el.style.left = c.x + 'px';
        c.el.style.top = c.y + 'px';
      });

      requestAnimationFrame(animateCheeses);
    }

    // Clic en el radar: añadir queso si no se clicó en uno
    radar.addEventListener('click', (e) => {
      const rect = radar.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      addCheese(x, y);
    });

    // Inicializa
    spawnInitialCheeses();
    animateCheeses();
  </script>
</body>
</html>
